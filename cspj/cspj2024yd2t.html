<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>CSP-J 2024 入门级 第一轮（初赛） 阅读程序（2）</title>
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.css" rel="stylesheet"/>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .description { background: #f9f9f9; border: 1px solid #ddd; padding: 10px; margin-bottom: 20px; border-radius: 5px; overflow-x: auto; }
    .question { margin-bottom: 20px; }
    button { margin-top: 10px; padding: 8px 12px; }
    .correct { color: green; font-weight: bold; }
    .wrong { color: red; font-weight: bold; }

    /* 进度条样式 */
    .progress-container {
      width: 100%;
      background-color: #f3f3f3;
      border-radius: 20px;
      margin-top: 15px;
      height: 25px;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
    }
    .progress-bar {
      height: 100%;
      border-radius: 20px;
      text-align: center;
      line-height: 25px;
      color: white;
      font-weight: bold;
      width: 0%;
      transition: width 1s ease-in-out;
    }

    /* 倒计时 */
    #timer {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 20px;
      color: darkblue;
    }
  </style>
</head>
<body>
  <h1>CSP-J 2024 入门级 第一轮（初赛） 阅读程序（2）</h1>

  <!-- 倒计时显示 -->
  <div id="timer">剩余时间：15:00</div>

  <!-- 程序描述区 -->
  <div class="description">
<pre><code class="language-javascript">1 #include < iostream >
2 #include < vector >
3 using namespace std;
4
5 int compute(vector<int> &cost) {
6     int n = cost.size();
7     vector<int> dp(n + 1, 0);
8     dp[1] = cost[0];
9     for (int i = 2; i <= n; i++) {
10       dp[i] = min(dp[i - 1], dp[i - 2]) + cost[i - 1];
11    }
12    return min(dp[n], dp[n - 1]);
13 }
14
15 int main() {
16     int n;
17     cin >> n;
18     vector<int> cost(n);
19     for (int i = 0; i < n; i++) {
20         cin >> cost[i];
21     }
22     cout << compute(cost) << endl;
23     return 0;
24 }

</code></pre>
  </div>

  <!-- 题目区域 -->
  <div id="quiz"></div>
  <button onclick="submitQuiz()">提交答案</button>

  <h2 id="result"></h2>
  <div class="progress-container">
    <div id="progress-bar" class="progress-bar">0%</div>
  </div>

  <!-- Prism 高亮库 -->
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-javascript.min.js"></script>

  <script>
    // 题目数据
      const questions = [
       {
        text: "1. 当输入的 cost 数组为{10，15，20}时，程序的输出为 15（ ）",
        options: ["A. T", "B. F"],
        answer: [0],
        rule: "any",
        score: 1
      },
      {
        text: "2. 如果将 dp[i-1]改为 dp[i-3]，程序可能会产生编译错误（ ）",
        options: ["A. T", "B. F"],
        answer: [1],
        rule: "any",
        score: 1
      },
      {
        text: "3. 程序总是输出 cost 数组种的最小的元素（ ）",
        options:["A. T", "B. F"],
        answer: [1],
        rule: "any",
        score: 1
      },
      {
        text: "4. 当输入的 cost 数组为｛1,100,1,1,1,100,1,1,100,1｝时，程序的输出为（）",
        options: ["A. 6", "B. 7", "C. 8", "D. 9"],
        answer:[0],
        rule: "any",
        score: 1
      },
      {
        text: "5. 如果输入的 cost 数组为｛10,15,30,5,5,10,20｝，程序的输出为()",
        options: ["A. 25", "B. 30", "C. 35", "D. 40"],
        answer: [1],
        rule: "any",
        score: 1
      },
      {
        text: "6. 若将代码中的 min(dp[i-1],dp[i-2])+cost[i-1]修改为 dp[i-1]+cost[i-2]，输入 cost 数组为{5,10,15}时，程序的输出为（）",
        options: ["A. 10", "B. 15", "C. 20", "D. 25"],
        answer: [0],
        rule: "any",
        score: 1
      }

    ];


    // 渲染题目
    const quizDiv = document.getElementById("quiz");
    questions.forEach((q, i) => {
      const div = document.createElement("div");
      div.className = "question";

      //const isMulti = q.answer.length > 1 || q.rule === "any";
      const isMulti = false;

      div.innerHTML = `<p id="q${i}-text">${q.text} <small>（${q.score}分）</small></p>` 
        + q.options.map((opt, j) =>
          `<label><input type="${isMulti ? "checkbox" : "radio"}" name="q${i}" value="${j}"> ${opt}</label><br>`
        ).join("") 
        + `<p class="feedback" id="feedback${i}"></p>`;
      quizDiv.appendChild(div);
    });

    // 提交判分
    function submitQuiz(auto=false) {
      let totalScore = 0;
      let maxScore = questions.reduce((sum, q) => sum + q.score, 0);

      questions.forEach((q, i) => {
        const selected = Array.from(document.querySelectorAll(`input[name="q${i}"]:checked`)).map(el => parseInt(el.value));
        let isCorrect = false;

        if (q.rule === "all") {
          isCorrect = selected.length === q.answer.length &&
                      selected.every(val => q.answer.includes(val));
        } else if (q.rule === "any") {
          const hasCorrect = selected.some(val => q.answer.includes(val));
          const hasWrong = selected.some(val => !q.answer.includes(val));
          isCorrect = hasCorrect && !hasWrong;
        }

        if (isCorrect) totalScore += q.score;

        const correctText = q.answer.map(idx => q.options[idx]).join("，");
        document.getElementById(`feedback${i}`).innerHTML = isCorrect
          ? `<span class="correct">✔ 回答正确，得 ${q.score} 分</span>（正确答案：${correctText}）`
          : `<span class="wrong">✘ 回答错误，得 0 分</span>（正确答案：${correctText}）`;
      });

      document.getElementById("result").innerText =
        (auto ? "⏰ 时间到，已自动提交！ " : "") +
        `最终得分：${totalScore} / ${maxScore}`;

      const percent = Math.round((totalScore / maxScore) * 100);
      const progressBar = document.getElementById("progress-bar");
      progressBar.style.width = percent + "%";
      progressBar.innerText = percent + "%";

      if (percent < 50) {
        progressBar.style.backgroundColor = "red";
      } else if (percent < 80) {
        progressBar.style.backgroundColor = "orange";
      } else {
        progressBar.style.backgroundColor = "green";
      }

      // 停止计时
      clearInterval(timerInterval);
    }

    // 倒计时逻辑
    let timeLeft = 900; // 秒
    const timerDiv = document.getElementById("timer");

    function formatTime(seconds) {
      const m = String(Math.floor(seconds / 60)).padStart(2, "0");
      const s = String(seconds % 60).padStart(2, "0");
      return `${m}:${s}`;
    }

    const timerInterval = setInterval(() => {
      timeLeft--;
      timerDiv.innerText = `剩余时间：${formatTime(timeLeft)}`;
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        submitQuiz(true); // 自动提交
      }
    }, 1000);

    // 初始化显示
    timerDiv.innerText = `剩余时间：${formatTime(timeLeft)}`;
  </script>
</body>
</html>